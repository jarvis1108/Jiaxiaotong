<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">

		<title>最强学霸</title>
		<link rel="stylesheet" href="layui/css/layui.css">
		<script src="jquery-3.3.1.min.js"></script>
		<script src="js/FuncCommBnsApp.js"></script>
		<script src="js/FuncCommJQuery.js"></script>
		<script type="text/javascript" src="js/login.js"></script>

	</head>

	<body>

		<div class="login-main">
			<header class="layui-elip">登陆</header>
			<form class="layui-form">
				<div class="layui-input-inline">
					<input type="text" name="account" required lay-verify="required" placeholder="用户名" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-input-inline">
					<input type="password" name="password" required lay-verify="required" placeholder="密码" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-input-inline login-btn">
					<button lay-submit lay-filter="login" class="layui-btn">登陆</button>
				</div>
				<hr/>
				<!--<div class="layui-input-inline">
            <button type="button" class="layui-btn layui-btn-primary">QQ登陆</button>
        </div>
        <div class="layui-input-inline">
            <button type="button" class="layui-btn layui-btn-normal">微信登陆</button>
        </div>-->
				<p>
					<p onclick="toScan()">扫码登陆</p>
					<a href="javascript:;" class="fr">忘记密码</a>
				</p>
			</form>
		</div>
		<style>
			.layui-elip {
				display: flex;
				justify-content: center;
				font-size: 20px;
			}
			
			.layui-input-inline {
				display: flex;
				/*flex 布局 */
				justify-content: center;
				margin: auto;
				top: 20px;
				width: 30%;
				padding: 1rem;
			}
			
			.layui-btn {
				width: 100%;
			}
			
			.fl {
				position: relative;
				left: 400px;
			}
			
			.fr {
				position: absolute;
				right: 400px;
			}
		</style>

		<script src="layui/layui.js"></script>
		<script type="text/javascript">
			layui.use(['form', 'layer', 'jquery'], function() {

				// 操作对象
				var form = layui.form;
				var $ = layui.jquery;
				form.on('submit(login)', function(data) {
					// console.log(data.field);
					var param = {
						"reqId": '1',
						"reqType": 'BAM_ADM_010_AdminLogin',
						"reqParam": {
							"account": data.field.account,
							"adminPsw": data.field.password
						}
					};
					$.ajax({
						url: 'http://strongestscholar.dxtwangxiao.com:8089/strongestscholar/api/v1/bam/admin/login',
						type: "POST",
						contentType: 'application/json;charset=UTF-8',
						data: JSON.stringify(param),
						dataType: 'json',
						success: function(data) {
							if(data.resResult.curData == null) {
								alert("账号或密码错误");
							} else {
								console.log(data.resResult.curData.adminName);
								location.href = "dataManage.html?id="+data.resResult.curData.adminName;
							}
						},
						error: function(XMLHttpRequest, textStatus, errorThrown) {
							console.log("XMLHttpRequest" + XMLHttpRequest);
							console.log("XMLHttpRequest.readyState" + XMLHttpRequest.readyState);
							console.log("XMLHttpRequest.status" + XMLHttpRequest.status);
							console.log("textStatus" + textStatus);
							console.log("errorThrown" + errorThrown);
							alert("登录出错，请检查网络设置或联系后台");
						}
					});
					return false;
				})

			});
		</script>
	</body>

</html>